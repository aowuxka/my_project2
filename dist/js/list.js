"use strict";require(["config"],function(){require(["jquery","template","fly","load"],function(t,e){t.getJSON("/mock/list.json",function(i){var c={products:i.res_body.data},r=e("list_template",c);t(".buy").html(r),t(".buy").delegate(".images","click",function(e){var i=t(this).parent().children(".id").text();t.cookie("id",i,{expires:7,path:"/"}),location="/html/detail.html"})}),t(function(){t.cookie.json=!0,t(".buy").delegate(".add","click",function(e){var i,c,r,o=t(this).parent(),a={id:o.children(".id").text(),title:o.children(".title").text(),price:o.children(".price").text().slice(1),amount:1,img:o.children(".images").attr("src")},n=t.cookie("products")||[],l=(i=a.id,c=n,r=-1,t.each(c,function(t,e){if(e.id==i)return r=t,!1}),r);-1===l?n.push(a):n[l].amount++,t.cookie("products",n,{expires:7,path:"/"}),t('<img src="'+o.children(".images").attr("src")+'">').fly({start:{left:e.pageX,top:e.pageY},end:{left:t(".cart").offset().left,top:t(".cart").offset().top,width:0,height:0}})})})})});